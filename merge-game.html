<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¯Ù…Ø¬ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© - Merge Game Pro</title>
<style>
    body { font-family: Arial, sans-serif; background:#f0f8ff; text-align:center; margin:0; padding:0; }
    #game { margin:20px auto; max-width:500px; }
    .button { padding:10px 20px; margin:5px; cursor:pointer; }
    .merge-btn { background:#4CAF50; color:white; border:none; }
    #status { margin-top:10px; font-weight:bold; }
    input { padding:8px; margin:5px; width:80%; font-size:16px; }
</style>
</head>
<body>

<h1>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¯Ù…Ø¬ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© - Merge Game Pro</h1>

<div id="login">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±</h3>
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input type="text" id="guest" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø²Ø§Ø¦Ø±">
    <button class="button" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="game" style="display:none;">
    <h3>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <span id="userId"></span></h3>
    <p>Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: <span id="gems"></span> | Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="points"></span> | DA: <span id="da"></span></p>

    <h4>Ø§Ø®ØªØ± Ø¹Ù†ØµØ±ÙŠÙ† Ù„Ù„Ø¯Ù…Ø¬</h4>
    <button class="button merge-btn" onclick="merge(1,1)">ğŸ</button>
    <button class="button merge-btn" onclick="merge(2,2)">ğŸŒ</button>
    <button class="button merge-btn" onclick="merge(3,3)">ğŸ‡</button>
    <button class="button merge-btn" onclick="merge(4,4)">ğŸ¥¦</button>
    <button class="button merge-btn" onclick="merge(1,4)">ğŸ+ğŸ¥¦</button>

    <div id="status"></div>
    <button class="button" onclick="charge()">Ø´Ø±Ø§Ø¡ Ø¬ÙˆØ§Ù‡Ø±</button>
</div>

<script>
let currentUser = null;

function login(){
    const email = document.getElementById('email').value;
    const guest = document.getElementById('guest').value;
    fetch('https://merge-game.onrender.com/api/login', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ email, guestId: guest })
    })
    .then(r=>r.json())
    .then(data=>{
        currentUser = data.id;
        document.getElementById('userId').innerText = currentUser;
        document.getElementById('gems').innerText = data.gems;
        document.getElementById('points').innerText = data.points;
        document.getElementById('da').innerText = data.da;
        document.getElementById('login').style.display='none';
        document.getElementById('game').style.display='block';
    });
}

function merge(el1, el2){
    if(!currentUser) return alert('Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
    fetch('https://merge-game.onrender.com/api/merge',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ id:currentUser, el1, el2 })
    })
    .then(r=>r.json())
    .then(data=>{
        document.getElementById('status').innerText = data.message;
        document.getElementById('gems').innerText = data.gems;
        document.getElementById('points').innerText = data.points;
        document.getElementById('da').innerText = data.da;
    });
}

function charge(){
    const gems = prompt("ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø´Ø­Ù†Ù‡Ø§ØŸ");
    if(!gems) return;
    fetch('https://merge-game.onrender.com/api/charge',{
        method:'POST',
        headers:{
            'Content-Type':'application/json',
            'x-api-key':'MERGE_GAME_2026_SECRET_KEY'
        },
        body: JSON.stringify({ id:currentUser, gems })
    })
    .then(r=>r.json())
    .then(data=>{
        alert(data.message + ". Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯: " + data.balance);
        document.getElementById('gems').innerText = data.balance;
    });
}
</script>

</body>
</html>